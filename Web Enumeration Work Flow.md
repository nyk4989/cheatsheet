# # SQLi [CheatSheet](obsidian://open?vault=CheatSheet&file=ChatSheet%2F%E8%84%86%E5%BC%B1%E6%80%A7%E5%88%A5%2FSQL%20Injection)
## ## 1. URLパラ、POSTパラ、JSONボディ
- 怪しい値(id / user / page)などのDBとやり取りしてそうな値がある場合にSQLiを試す。

```例
https://0afc009d047790c78112d44600d300c9.web-security-academy.net/filter?category=Gifts
```

- **Check List**
[1] クォーテーション投入  
- `'` シングルクォート  
	- [ ] レスポンスに変化あり？
	- [ ] レスポンスに変化なし？
	- [ ] SQLの構文エラーあり？
	- [ ] SQLの構文エラーなし？
- `"` ダブルクォート  
	- [ ] レスポンスに変化あり？
	- [ ] レスポンスに変化なし？
	- [ ] SQLの構文エラーあり？
	- [ ] SQLの構文エラーなし？
[2] どれか確認できたら実行  
- [ ] SQLmap投入（PoC / 自動化確認）

---
## ## 2. ログイン機能
- ログイン機能があった場合に、Bypassができないかを試みる。
	![[Pasted image 20250714001725.png]]

- **Check List**
[1] クォーテーション投入  
- `'` シングルクォート  
	- [ ] レスポンスに変化あり？
	- [ ] レスポンスに変化なし？
	- [ ] SQLの構文エラーあり？
	- [ ] SQLの構文エラーなし？
- `"` ダブルクォート  
	- [ ] レスポンスに変化あり？
	- [ ] レスポンスに変化なし？
	- [ ] SQLの構文エラーあり？
	- [ ] SQLの構文エラーなし？
**[2] 差異・エラーが確認できた場合**
- [ ] OR-based SQLi（`OR 1=1 --`）確認
- [ ] UNION SELECT 検証
---
# # XSS [CheatSheet](obsidian://open?vault=CheatSheet&file=ChatSheet%2F%E8%84%86%E5%BC%B1%E6%80%A7%E5%88%A5%2FXSS)

## ## 説明
- 反射型
入力した文字が次のページで折り返るやつ。
- 保存型
	- こういったコメント機能など次のレスポンスで折り返るとかではなく、ほかのページに入力値が保存される系のことを指す。
	![[Pasted image 20250714221329.png]]
- DOM-Base XSS
	- 受け取ったデータを`evil()`や`innerHTML`などの動的なコード実行を許すシンク(sink)に渡すことで発生する。これにより攻撃者は悪意のあるJSの実行ができてしまう。
	- ソースとシンク
		- ソースは、データを受け取る場所。
		- シンクは、受け取ったデータを処理される場所。
	- DOMベースは通信が発生しない。以下の様にクライアントのブラウザで確認ができてしまう。
		 ![[Pasted image 20250714225637.png]]
		- 上記のことからブラウザーで確認ができる。
	- ちょっとソースコードベース

## ## 折り返しの確認
### ### 反射型&保存型
- レスポンスに文字が折り返ってきてるか？
	- Response Bodyに折り返しがあるか？
		- [ ] ある
		- [ ] ない
	- リクエストヘッダがレスポンスで折り返ってきてるか？
		- [ ] ある
		- [ ] ない
	- サニタイズがされているか？
		- [ ] されている。
		- [ ] されていない。
		- [ ] 不明
	- バリデーションがされているか？
		- [ ] されている。
		- [ ] されてない。
		- [ ] 不明
	- エスケープ処理
		- [ ] されてる。
		- [ ] されてない。
		- [ ] 不明
	- 以下の発火するか。
		- [ ] `<script>alert(1)</script>`
### ### DOMベースの確認方法
- 実際にどう渡されてるかを確認する。
	- [ ] ソースとシンクがどうなっているかを確認。
	- [ ] Payloadを組み立てる。
		`<img src=x onerror=alert(1)>`
- 